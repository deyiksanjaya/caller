<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Click to Begin</title>
    <!-- Tailwind CSS CDN for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom styles for the overlay and modal */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 50;
        }
        .hidden {
            display: none !important;
        }
        /* Ensure the body and html take up the full screen */
        html, body {
            height: 100%;
            margin: 0;
        }
        /* --- GHOST BUTTON STYLES (NO HOVER) --- */
        .ghost-btn {
            background-color: transparent;
            border: 2px solid white;
            color: white;
            transition: all 0.2s ease-in-out;
        }
        /* Red variant for heart and diamond suits */
        .ghost-btn.suit-red {
            border-color: #ef4444; /* red-500 */
            color: #ef4444;
        }
    </style>
</head>
<body class="bg-black">

    <!-- Fullscreen Clickable Area -->
    <div id="fullscreen-trigger" class="w-full h-full cursor-pointer">
        <!-- This area is intentionally blank -->
    </div>

    <!-- Card Keypad (Initially Hidden) -->
    <div id="cardKeypad" class="hidden fixed inset-0 flex items-center justify-center p-4">
        <!-- KEYPAD BACKGROUND UPDATED: bg-black -->
        <div class="w-full max-w-xs bg-black rounded-2xl p-6">
            <h3 id="keypadTitle" class="text-white text-xl text-center font-bold mb-4">Select a Value</h3>
            <!-- This container will be dynamically filled with ranks or suits -->
            <div id="selectionContainer" class="grid gap-2">
                <!-- Content generated by JS -->
            </div>
        </div>
    </div>

    <!-- Unified Modal (Initially Hidden) -->
    <div id="infoModal" class="modal-overlay hidden">
        <div class="bg-black p-8 rounded-xl max-w-sm w-full m-4">
            <h2 class="text-2xl font-bold mb-6 text-center text-white">Enter Your Information</h2>
            <div class="mb-4">
                <label for="phoneNumberInput" class="block text-sm font-medium text-gray-400 mb-1 text-left">Phone Number</label>
                <input type="tel" id="phoneNumberInput" placeholder="Enter at least 10 digits" class="w-full p-3 bg-transparent border border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 text-white placeholder-gray-500"/>
            </div>
            <div class="mb-4">
                <label for="dobInput" class="block text-sm font-medium text-gray-400 mb-1 text-left">Date of Birth</label>
                <input type="text" id="dobInput" placeholder="MM/DD/YYYY" class="w-full p-3 bg-transparent border border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 text-white placeholder-gray-500"/>
            </div>
            <div class="mt-6">
                <button id="closeModalBtn" class="ghost-btn w-full font-semibold py-3 rounded-lg">Close</button>
            </div>
        </div>
    </div>

    <script>
        // --- Element References ---
        const fullscreenTrigger = document.getElementById('fullscreen-trigger');
        const infoModal = document.getElementById('infoModal');
        const closeModalBtn = document.getElementById('closeModalBtn');
        const phoneNumberInput = document.getElementById('phoneNumberInput');
        const dobInput = document.getElementById('dobInput');
        const cardKeypad = document.getElementById('cardKeypad');
        const keypadTitle = document.getElementById('keypadTitle');
        const selectionContainer = document.getElementById('selectionContainer');

        // --- State Management ---
        let inactivityTimer;

        // --- Inactivity Logic ---
        function handleVisibilityChange() {
            if (document.visibilityState === 'hidden') {
                inactivityTimer = setTimeout(() => {
                    window.location.replace('https://www.google.com');
                }, 5000);
            } else {
                clearTimeout(inactivityTimer);
            }
        }
        document.addEventListener('visibilitychange', handleVisibilityChange);

        // --- Validation Functions ---
        function isValidPhoneNumber(number) { return number.replace(/\D/g, '').length > 9; }
        function isValidDOB(dateString) { return /^(0[1-9]|1[0-2])\/(0[1-9]|[12][0-9]|3[01])\/\d{4}$/.test(dateString); }

        // --- Modal & Keypad Control ---
        function openModal() {
            infoModal.classList.remove('hidden');
            phoneNumberInput.focus();
        }
        function closeModal() {
            infoModal.classList.add('hidden');
            phoneNumberInput.value = '';
            dobInput.value = '';
        }

        // --- Main Application Flow ---
        function completeInfoSubmission() {
            closeModal();
            cardKeypad.classList.remove('hidden');
            fullscreenTrigger.classList.add('hidden');
            displayRanks();
        }
        
        // --- Card Selection and Redirect Logic ---
        function redirectToGoogle(rank, suit) {
            const rankMap = { 'A': 'Ace', 'K': 'King', 'Q': 'Queen', 'J': 'Jack' };
            const suitMap = { '♠': 'Spades', '♥': 'Hearts', '♦': 'Diamonds', '♣': 'Clubs' };
            const rankName = rankMap[rank] || rank;
            const suitName = suitMap[suit];
            const query = `${rankName} of ${suitName}`;
            const url = `https://www.google.com/search?q=${encodeURIComponent(query)}`;
            keypadTitle.textContent = `Searching for ${query}...`;
            setTimeout(() => { window.location.replace(url); }, 500);
        }

        // --- Dynamic Keypad Display ---
        function displayRanks() {
            selectionContainer.innerHTML = '';
            selectionContainer.className = 'grid grid-cols-3 gap-2';
            keypadTitle.textContent = 'Select a Value';
            
            const ranks = ['A', '2', '3', '4', '5', '6', '7', '8', '9', '10', 'J', 'Q', 'K'];
            ranks.forEach(rank => {
                const btn = document.createElement('button');
                let classes = 'ghost-btn font-bold rounded-lg flex items-center justify-center py-4';
                if (rank === 'K') {
                    classes += ' col-span-3';
                }
                btn.className = classes;
                btn.textContent = rank;
                btn.onclick = () => displaySuits(rank);
                selectionContainer.appendChild(btn);
            });
        }

        function displaySuits(selectedRank) {
            selectionContainer.innerHTML = '';
            selectionContainer.className = 'grid grid-cols-2 gap-2';
            const rankName = ({ 'A': 'Ace', 'K': 'King', 'Q': 'Queen', 'J': 'Jack' })[selectedRank] || selectedRank;
            keypadTitle.textContent = `${rankName} - Select a Suit`;

            const suits = ['♠', '♥', '♦', '♣'];
            suits.forEach(suit => {
                const btn = document.createElement('button');
                let classes = 'ghost-btn text-4xl font-bold rounded-lg flex items-center justify-center py-4';
                if (suit === '♥' || suit === '♦') {
                    classes += ' suit-red';
                }
                btn.className = classes;
                btn.textContent = suit;
                btn.onclick = () => redirectToGoogle(selectedRank, suit);
                selectionContainer.appendChild(btn);
            });
        }

        // --- Event Listeners ---
        phoneNumberInput.addEventListener('input', () => {
            if (isValidPhoneNumber(phoneNumberInput.value)) dobInput.focus();
        });
        dobInput.addEventListener('input', () => {
            if (isValidDOB(dobInput.value) && isValidPhoneNumber(phoneNumberInput.value)) {
                completeInfoSubmission();
            }
        });

        fullscreenTrigger.addEventListener('click', openModal);
        closeModalBtn.addEventListener('click', closeModal);

    </script>
</body>
</html>
